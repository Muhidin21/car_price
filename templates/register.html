{% extends "base.html" %}

{% block title %}Sign Up - Car Price Prediction{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-8">
    <div class="text-center mb-8">
        <i class="fas fa-user-plus text-4xl text-green-600 mb-4"></i>
        <h2 class="text-3xl font-bold text-gray-800">Sign Up</h2>
        <p class="text-gray-600 mt-2">Create your account</p>
    </div>

    <form method="POST" class="space-y-6">
        <div>
            <label for="username" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-user mr-2"></i>Username
            </label>
            <input type="text" 
                   id="username" 
                   name="username" 
                   required 
                   minlength="3"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                   placeholder="Choose a username">
        </div>

        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-envelope mr-2"></i>Email
            </label>
            <input type="email" 
                   id="email" 
                   name="email" 
                   required 
                   pattern="[a-zA-Z0-9._%+-]+@gmail\.com$"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                   placeholder="your-email@gmail.com">
            <p class="text-xs text-gray-500 mt-1">Only Gmail addresses (@gmail.com) are accepted</p>
        </div>

        <div>
            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-lock mr-2"></i>Password
            </label>
            <input type="password" 
                   id="password" 
                   name="password" 
                   required 
                   minlength="6"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                   placeholder="Create a password (min 6 characters)">
        </div>

        <div>
            <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-lock mr-2"></i>Confirm Password
            </label>
            <input type="password" 
                   id="confirm_password" 
                   name="confirm_password" 
                   required 
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                   placeholder="Confirm your password">
        </div>

        <button type="submit" 
                class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200">
            <i class="fas fa-user-plus mr-2"></i>Sign Up
        </button>
    </form>

    <div class="mt-6 text-center">
        <p class="text-gray-600">
            Already have an account? 
            <a href="{{ url_for('login') }}" class="text-blue-600 hover:text-blue-800 font-semibold">
                Sign in here
            </a>
        </p>
    </div>

    <!-- Registration Info -->
    <div class="mt-8 p-4 bg-blue-50 rounded-lg">
        <h3 class="text-sm font-semibold text-blue-700 mb-2">
            <i class="fas fa-info-circle mr-2"></i>Registration Process
        </h3>
        <ul class="text-xs text-blue-600 space-y-1">
            <li><i class="fas fa-at mr-2"></i>Only Gmail addresses (@gmail.com) accepted</li>
            <li><i class="fas fa-envelope mr-2"></i>Email verification required</li>
            <li><i class="fas fa-clock mr-2"></i>Verification code expires in 10 minutes</li>
            <li><i class="fas fa-shield-alt mr-2"></i>Secure account protection</li>
        </ul>
    </div>

    <!-- Account Benefits -->
    <div class="mt-4 p-4 bg-green-50 rounded-lg">
        <h3 class="text-sm font-semibold text-green-700 mb-2">
            <i class="fas fa-star mr-2"></i>Account Benefits
        </h3>
        <ul class="text-xs text-green-600 space-y-1">
            <li><i class="fas fa-check mr-2"></i>Prediction history tracking</li>
            <li><i class="fas fa-check mr-2"></i>Save favorite car models</li>
            <li><i class="fas fa-check mr-2"></i>Export prediction reports</li>
            <li><i class="fas fa-check mr-2"></i>Priority customer support</li>
        </ul>
    </div>
</div>

<script>
// Email domain validation
document.getElementById('email').addEventListener('input', function() {
    const email = this.value.toLowerCase();
    const emailError = document.getElementById('email-error');
    
    if (email && !email.endsWith('@gmail.com')) {
        this.setCustomValidity('Only Gmail addresses (@gmail.com) are allowed');
        if (!emailError) {
            const errorMsg = document.createElement('p');
            errorMsg.id = 'email-error';
            errorMsg.className = 'text-xs text-red-500 mt-1';
            errorMsg.innerHTML = '<i class="fas fa-exclamation-triangle mr-1"></i>Only Gmail addresses are accepted';
            this.parentNode.appendChild(errorMsg);
        }
        this.classList.add('border-red-500');
        this.classList.remove('border-gray-300');
    } else {
        this.setCustomValidity('');
        if (emailError) {
            emailError.remove();
        }
        this.classList.remove('border-red-500');
        this.classList.add('border-gray-300');
    }
});

// Password confirmation validation
document.getElementById('confirm_password').addEventListener('input', function() {
    const password = document.getElementById('password').value;
    const confirmPassword = this.value;
    
    if (password !== confirmPassword) {
        this.setCustomValidity('Passwords do not match');
    } else {
        this.setCustomValidity('');
    }
});
</script>
{% endblock %}
